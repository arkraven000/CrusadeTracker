<Defaults>
    <!-- Text defaults -->
    <Text fontSize="14" color="#FFFFFF" />

    <!-- Button defaults with state colors: normal|highlighted|pressed|disabled -->
    <Button fontSize="14"
            colors="#DDDDDD|#FFFFFF|#AAAAAA|#555555"
            textColor="#111111" />

    <!-- Toggle defaults with state colors -->
    <Toggle fontSize="12"
            colors="#888888|#AAAAAA|#666666|#444444" />

    <!-- Input defaults -->
    <InputField fontSize="14"
                characterLimit="100"
                color="#1A1A2E"
                textColor="#EEEEEE"
                placeholder="..." />

    <!-- Dropdown defaults -->
    <Dropdown fontSize="14"
              color="#1A1A2E"
              textColor="#EEEEEE"
              itemTextColor="#EEEEEE"
              itemBackgroundColors="#1A1A2E|#333355" />
</Defaults>

<!-- Main UI Container -->
<Panel id="crusadeTrackerUI"
       position="0 0 0"
       rotation="0 0 0"
       width="400"
       height="600"
       padding="10 10 10 10"
       color="rgba(0,0,0,0.9)"
       allowDragging="true"
       returnToOriginalPositionWhenReleased="false"
       active="true">

    <!-- Main Menu Panel -->
    <Panel id="mainMenuPanel"
           width="100%"
           height="100%"
           active="true">

        <VerticalLayout spacing="15" padding="20">
            <Text fontSize="24" alignment="MiddleCenter" color="#D4A843" fontStyle="Bold">
                CRUSADE TRACKER
            </Text>

            <Text fontSize="12" alignment="MiddleCenter" color="#888888">
                Warhammer 40,000 10th Edition
            </Text>

            <Panel height="20" />

            <Button id="mainMenu_newCampaign"
                    height="50"
                    fontSize="16"
                    fontStyle="Bold"
                    colors="#8B6914|#D4A843|#6B5010|#44340A"
                    textColor="#FFFFFF"
                    onClick="onUIButtonClick">
                New Campaign
            </Button>

            <Button id="mainMenu_loadCampaign"
                    height="50"
                    fontSize="14"
                    colors="#444444|#666666|#333333|#222222"
                    textColor="#CCCCCC"
                    onClick="onUIButtonClick">
                Load Campaign
            </Button>

            <Button id="mainMenu_settings"
                    height="50"
                    fontSize="14"
                    colors="#444444|#666666|#333333|#222222"
                    textColor="#CCCCCC"
                    onClick="onUIButtonClick">
                Settings
            </Button>

            <Panel height="40" />

            <Text fontSize="10" alignment="MiddleCenter" color="#555555">
                Version 1.0.0-alpha
            </Text>
        </VerticalLayout>
    </Panel>

    <!-- Campaign Setup Wizard -->
    <Panel id="campaignSetupPanel"
           width="100%"
           height="100%"
           active="false">

        <VerticalLayout spacing="8" padding="12 15 12 15">
            <!-- Title -->
            <Text fontSize="22" alignment="MiddleCenter" color="#D4A843" fontStyle="Bold">
                NEW CAMPAIGN
            </Text>
            <Text id="setupStepDescription" fontSize="11" alignment="MiddleCenter" color="#888888">
                Name your campaign and set basic rules
            </Text>

            <Panel height="4" />

            <!-- Step Indicator with Labels -->
            <HorizontalLayout spacing="3" height="36">
                <Panel id="setupStep1Indicator" width="20%" height="100%" color="#D4A843">
                    <Text id="setupStep1Label" text="1 Basics" fontSize="9" color="#000000" alignment="MiddleCenter" fontStyle="Bold" />
                </Panel>
                <Panel id="setupStep2Indicator" width="20%" height="100%" color="#333333">
                    <Text id="setupStep2Label" text="2 Map" fontSize="9" color="#666666" alignment="MiddleCenter" />
                </Panel>
                <Panel id="setupStep3Indicator" width="20%" height="100%" color="#333333">
                    <Text id="setupStep3Label" text="3 Players" fontSize="9" color="#666666" alignment="MiddleCenter" />
                </Panel>
                <Panel id="setupStep4Indicator" width="20%" height="100%" color="#333333">
                    <Text id="setupStep4Label" text="4 Mission" fontSize="9" color="#666666" alignment="MiddleCenter" />
                </Panel>
                <Panel id="setupStep5Indicator" width="20%" height="100%" color="#333333">
                    <Text id="setupStep5Label" text="5 Review" fontSize="9" color="#666666" alignment="MiddleCenter" />
                </Panel>
            </HorizontalLayout>

            <Panel height="2" />

            <!-- Step Content Area -->
            <Panel id="setupContentArea" width="100%" height="400" />

            <!-- Navigation Buttons -->
            <HorizontalLayout spacing="8" height="42">
                <Button id="campaignSetup_cancel"
                        width="25%"
                        onClick="onUIButtonClick"
                        fontSize="13"
                        colors="#3A2222|#553333|#2A1515|#221111"
                        textColor="#CC8888">
                    Cancel
                </Button>

                <Button id="campaignSetup_previous"
                        width="30%"
                        onClick="onUIButtonClick"
                        fontSize="13"
                        colors="#444444|#666666|#333333|#222222"
                        textColor="#AAAAAA">
                    Previous
                </Button>

                <Button id="campaignSetup_next"
                        width="45%"
                        onClick="onUIButtonClick"
                        fontSize="15"
                        fontStyle="Bold"
                        colors="#8B6914|#D4A843|#6B5010|#44340A"
                        textColor="#FFFFFF">
                    Next
                </Button>
            </HorizontalLayout>
        </VerticalLayout>
    </Panel>

    <!-- Main Campaign Panel -->
    <Panel id="mainCampaignPanel"
           width="100%"
           height="100%"
           active="false">

        <VerticalLayout spacing="10" padding="15">
            <Text id="mainPanel_campaignName"
                  fontSize="20"
                  fontStyle="Bold"
                  color="#D4A843"
                  alignment="MiddleCenter">
                Campaign Name
            </Text>

            <Panel height="5" />

            <!-- Quick Stats -->
            <HorizontalLayout spacing="10" height="60">
                <Panel width="33%" color="rgba(30,30,40,0.9)" padding="5">
                    <VerticalLayout>
                        <Text id="mainPanel_playerCount" fontSize="16" color="#EEEEEE">2 Players</Text>
                        <Text fontSize="10" color="#888888">Active</Text>
                    </VerticalLayout>
                </Panel>

                <Panel width="33%" color="rgba(30,30,40,0.9)" padding="5">
                    <VerticalLayout>
                        <Text id="mainPanel_battleCount" fontSize="16" color="#EEEEEE">5 Battles</Text>
                        <Text fontSize="10" color="#888888">Fought</Text>
                    </VerticalLayout>
                </Panel>

                <Panel width="33%" color="rgba(30,30,40,0.9)" padding="5">
                    <VerticalLayout>
                        <Text id="mainPanel_territoryCount" fontSize="16" color="#EEEEEE">12 Hexes</Text>
                        <Text fontSize="10" color="#888888">Controlled</Text>
                    </VerticalLayout>
                </Panel>
            </HorizontalLayout>

            <!-- Action Buttons -->
            <VerticalLayout spacing="8">
                <Button id="mainPanel_recordBattle"
                        height="45"
                        fontStyle="Bold"
                        colors="#8B6914|#D4A843|#6B5010|#44340A"
                        textColor="#FFFFFF"
                        onClick="onUIButtonClick">
                    Record Battle
                </Button>

                <Button id="mainPanel_playerMgmt"
                        height="45"
                        colors="#444444|#666666|#333333|#222222"
                        textColor="#CCCCCC"
                        onClick="onUIButtonClick">
                    Manage Players
                </Button>

                <Button id="mainPanel_map"
                        height="45"
                        colors="#444444|#666666|#333333|#222222"
                        textColor="#CCCCCC"
                        onClick="onUIButtonClick">
                    View Map
                </Button>

                <Button id="mainPanel_battleLog"
                        height="45"
                        colors="#444444|#666666|#333333|#222222"
                        textColor="#CCCCCC"
                        onClick="onUIButtonClick">
                    Battle History
                </Button>

                <Button id="mainPanel_log"
                        height="45"
                        colors="#444444|#666666|#333333|#222222"
                        textColor="#CCCCCC"
                        onClick="onUIButtonClick">
                    Campaign Log
                </Button>

                <Button id="mainPanel_supplement"
                        height="45"
                        colors="#4A3A1A|#6B5520|#3A2A10|#2A1A08"
                        textColor="#D4A843"
                        onClick="onUIButtonClick"
                        active="false">
                    Crusade Supplement
                </Button>

                <Button id="mainPanel_settings"
                        height="45"
                        colors="#444444|#666666|#333333|#222222"
                        textColor="#CCCCCC"
                        onClick="onUIButtonClick">
                    Settings
                </Button>

                <Panel height="10" />

                <Button id="mainPanel_save"
                        height="45"
                        colors="#2E6B3A|#3D8B4D|#1E4B2A|#152E1A"
                        textColor="#FFFFFF"
                        onClick="onUIButtonClick">
                    Save Campaign
                </Button>
            </VerticalLayout>
        </VerticalLayout>
    </Panel>

    <!-- Settings Panel -->
    <Panel id="settingsPanel"
           width="100%"
           height="100%"
           active="false">

        <VerticalLayout spacing="10" padding="15">
            <Text fontSize="20" fontStyle="Bold" color="#D4A843">Settings</Text>

            <!-- Tab Buttons -->
            <HorizontalLayout spacing="5" height="35">
                <Button id="settings_tabGeneral"
                        colors="#444444|#666666|#333333|#222222"
                        textColor="#CCCCCC"
                        onClick="onUIButtonClick">General</Button>
                <Button id="settings_tabMap"
                        colors="#444444|#666666|#333333|#222222"
                        textColor="#CCCCCC"
                        onClick="onUIButtonClick">Map</Button>
                <Button id="settings_tabDisplay"
                        colors="#444444|#666666|#333333|#222222"
                        textColor="#CCCCCC"
                        onClick="onUIButtonClick">Display</Button>
            </HorizontalLayout>

            <!-- Map Skin Section -->
            <Text fontSize="13" color="#D4A843">MAP SKIN</Text>
            <VerticalLayout spacing="5">
                <Button id="settings_mapSkin_forgeWorld" colors="#444444|#666666|#333333|#222222" textColor="#CCCCCC" onClick="onUIButtonClick">Forge World</Button>
                <Button id="settings_mapSkin_deathWorld" colors="#444444|#666666|#333333|#222222" textColor="#CCCCCC" onClick="onUIButtonClick">Death World</Button>
                <Button id="settings_mapSkin_hiveCity" colors="#444444|#666666|#333333|#222222" textColor="#CCCCCC" onClick="onUIButtonClick">Hive City</Button>
                <Button id="settings_mapSkin_spaceHulk" colors="#444444|#666666|#333333|#222222" textColor="#CCCCCC" onClick="onUIButtonClick">Space Hulk</Button>
                <Button id="settings_mapSkin_iceWorld" colors="#444444|#666666|#333333|#222222" textColor="#CCCCCC" onClick="onUIButtonClick">Ice World</Button>
                <Button id="settings_mapSkin_desert" colors="#444444|#666666|#333333|#222222" textColor="#CCCCCC" onClick="onUIButtonClick">Desert</Button>
            </VerticalLayout>

            <!-- Display Options -->
            <Panel height="10" />
            <Text fontSize="13" color="#D4A843">DISPLAY OPTIONS</Text>
            <Toggle id="settings_toggleHexGuides"
                    onValueChanged="onUIButtonClick">
                Show Hex Guides
            </Toggle>

            <Panel height="20" />

            <Button id="settings_close"
                    colors="#444444|#666666|#333333|#222222"
                    textColor="#CCCCCC"
                    onClick="onUIButtonClick">
                Close
            </Button>
        </VerticalLayout>
    </Panel>

    <!-- Campaign Log Panel -->
    <Panel id="campaignLogPanel"
           width="100%"
           height="100%"
           active="false">

        <VerticalLayout spacing="10" padding="15">
            <Text fontSize="20" fontStyle="Bold" color="#D4A843">Campaign Log</Text>

            <!-- Filter Buttons -->
            <HorizontalLayout spacing="5" height="30">
                <Button id="campaignLog_filterAll" colors="#444444|#666666|#333333|#222222" textColor="#CCCCCC" onClick="onUIButtonClick">All</Button>
                <Button id="campaignLog_filterBattles" colors="#444444|#666666|#333333|#222222" textColor="#CCCCCC" onClick="onUIButtonClick">Battles</Button>
                <Button id="campaignLog_filterUnits" colors="#444444|#666666|#333333|#222222" textColor="#CCCCCC" onClick="onUIButtonClick">Units</Button>
                <Button id="campaignLog_filterPlayers" colors="#444444|#666666|#333333|#222222" textColor="#CCCCCC" onClick="onUIButtonClick">Players</Button>
            </HorizontalLayout>

            <!-- Log Content Area -->
            <Panel id="campaignLog_content"
                   width="100%"
                   height="450"
                   color="rgba(20,20,30,0.9)">
                <Text fontSize="12" color="#888888">
                    Campaign events will appear here...
                </Text>
            </Panel>

            <Button id="campaignLog_close"
                    colors="#444444|#666666|#333333|#222222"
                    textColor="#CCCCCC"
                    onClick="onUIButtonClick">
                Close
            </Button>
        </VerticalLayout>
    </Panel>

    <!-- Manage Forces Panel (Phase 3) -->
    <Panel id="manageForcesPanel"
           width="100%"
           height="100%"
           active="false">

        <VerticalLayout spacing="10" padding="15">
            <Text fontSize="20" fontStyle="Bold" color="#D4A843">Order of Battle</Text>

            <!-- Player Selector -->
            <HorizontalLayout spacing="10" height="40">
                <Text width="25%" color="#BBBBBB">Player:</Text>
                <Dropdown id="manageForces_playerSelect"
                         width="75%"
                         onChange="onUIButtonClick">
                </Dropdown>
            </HorizontalLayout>

            <!-- Supply Display -->
            <Panel id="manageForces_supplyPanel"
                   width="100%"
                   height="50"
                   color="rgba(20,20,30,0.9)"
                   padding="10">
                <VerticalLayout spacing="5">
                    <Text id="manageForces_supplyText" fontSize="14" color="#BBBBBB">
                        Supply: 0 / 50 PL
                    </Text>
                    <Panel id="manageForces_supplyBar"
                           width="100%"
                           height="10"
                           color="#4CAF50" />
                </VerticalLayout>
            </Panel>

            <!-- Search and Sort -->
            <HorizontalLayout spacing="10" height="35">
                <InputField id="manageForces_search"
                           width="60%"
                           placeholder="Search units..."
                           onValueChanged="onUIButtonClick" />
                <Dropdown id="manageForces_sortBy"
                         width="40%"
                         onChange="onUIButtonClick">
                    <Option value="name">Name</Option>
                    <Option value="role">Role</Option>
                    <Option value="xp">XP</Option>
                    <Option value="rank">Rank</Option>
                    <Option value="cp">CP</Option>
                </Dropdown>
            </HorizontalLayout>

            <!-- Unit List Area -->
            <Panel id="manageForces_unitList"
                   width="100%"
                   height="300"
                   color="rgba(20,20,30,0.9)">
                <Text fontSize="12" color="#888888">
                    No units in roster. Click "Add Unit" to begin.
                </Text>
            </Panel>

            <!-- Pagination -->
            <HorizontalLayout spacing="10" height="30">
                <Button id="manageForces_prevPage"
                        width="30%"
                        colors="#444444|#666666|#333333|#222222"
                        textColor="#CCCCCC"
                        onClick="onUIButtonClick">
                    Previous
                </Button>
                <Text id="manageForces_pageInfo" width="40%" alignment="MiddleCenter" color="#888888">
                    Page 1 / 1 (0 units)
                </Text>
                <Button id="manageForces_nextPage"
                        width="30%"
                        colors="#444444|#666666|#333333|#222222"
                        textColor="#CCCCCC"
                        onClick="onUIButtonClick">
                    Next
                </Button>
            </HorizontalLayout>

            <!-- Action Buttons -->
            <HorizontalLayout spacing="10" height="40">
                <Button id="manageForces_addUnit"
                        width="33%"
                        fontStyle="Bold"
                        colors="#8B6914|#D4A843|#6B5010|#44340A"
                        textColor="#FFFFFF"
                        onClick="onUIButtonClick">
                    Add Unit
                </Button>
                <Button id="manageForces_import"
                        width="33%"
                        colors="#444444|#666666|#333333|#222222"
                        textColor="#CCCCCC"
                        onClick="onUIButtonClick">
                    Import
                </Button>
                <Button id="manageForces_close"
                        width="33%"
                        colors="#444444|#666666|#333333|#222222"
                        textColor="#CCCCCC"
                        onClick="onUIButtonClick">
                    Close
                </Button>
            </HorizontalLayout>
        </VerticalLayout>
    </Panel>

    <!-- Unit Details Panel (Phase 3) -->
    <Panel id="unitDetailsPanel"
           width="100%"
           height="100%"
           active="false">

        <VerticalLayout spacing="10" padding="15">
            <Text id="unitDetails_title" fontSize="20" fontStyle="Bold" color="#D4A843">Unit Editor</Text>

            <!-- Basic Info Section -->
            <Panel width="100%" height="200" color="rgba(20,20,30,0.9)" padding="10">
                <VerticalLayout spacing="8">
                    <Text fontSize="13" color="#D4A843" fontStyle="Bold">BASIC INFORMATION</Text>

                    <HorizontalLayout spacing="5" height="30">
                        <Text width="30%" color="#BBBBBB">Unit Name:</Text>
                        <InputField id="unitDetails_name"
                                   width="70%"
                                   placeholder="Enter unit name..."
                                   onValueChanged="onUIButtonClick" />
                    </HorizontalLayout>

                    <HorizontalLayout spacing="5" height="30">
                        <Text width="30%" color="#BBBBBB">Unit Type:</Text>
                        <InputField id="unitDetails_unitType"
                                   width="70%"
                                   placeholder="e.g., Intercessor Squad"
                                   onValueChanged="onUIButtonClick" />
                    </HorizontalLayout>

                    <HorizontalLayout spacing="5" height="30">
                        <Text width="30%" color="#BBBBBB">Role:</Text>
                        <Dropdown id="unitDetails_role"
                                  width="70%"
                                  onValueChanged="onUIButtonClick">
                            <Option>HQ</Option>
                            <Option>Troops</Option>
                            <Option>Elites</Option>
                            <Option>Fast Attack</Option>
                            <Option>Heavy Support</Option>
                            <Option>Flyer</Option>
                            <Option>Dedicated Transport</Option>
                            <Option>Fortification</Option>
                            <Option>Lord of War</Option>
                        </Dropdown>
                    </HorizontalLayout>

                    <HorizontalLayout spacing="5" height="30">
                        <Text width="30%" color="#BBBBBB">Points:</Text>
                        <InputField id="unitDetails_points"
                                   width="30%"
                                   characterLimit="4"
                                   onValueChanged="onUIButtonClick" />
                        <Text width="40%" fontSize="10" color="#666666">Power Level / Points Cost</Text>
                    </HorizontalLayout>

                    <HorizontalLayout spacing="10" height="25">
                        <Toggle id="unitDetails_toggleCharacter" onClick="onUIButtonClick">CHARACTER</Toggle>
                        <Toggle id="unitDetails_toggleTitanic" onClick="onUIButtonClick">TITANIC</Toggle>
                        <Toggle id="unitDetails_toggleEpicHero" onClick="onUIButtonClick">EPIC HERO</Toggle>
                    </HorizontalLayout>
                </VerticalLayout>
            </Panel>

            <!-- Progression Section -->
            <Panel width="100%" height="120" color="rgba(20,20,30,0.9)" padding="10">
                <VerticalLayout spacing="8">
                    <Text fontSize="13" color="#D4A843" fontStyle="Bold">PROGRESSION</Text>

                    <HorizontalLayout spacing="10" height="25">
                        <Text id="unitDetails_xpText" width="40%" color="#BBBBBB">Experience: 0 XP</Text>
                        <Text id="unitDetails_rankText" width="60%" color="#BBBBBB">Rank: 1 - Battle-Ready</Text>
                    </HorizontalLayout>

                    <Text id="unitDetails_crusadePoints" fontSize="16" color="#4CAF50" alignment="MiddleCenter">
                        Crusade Points: 0
                    </Text>

                    <Text id="unitDetails_cpBreakdown" fontSize="10" color="#888888">
                        Honours: 0 CP | Scars: -0 CP
                    </Text>
                </VerticalLayout>
            </Panel>

            <!-- Battle Honours Section -->
            <Panel width="100%" height="80" color="rgba(20,20,30,0.9)" padding="10">
                <VerticalLayout spacing="5">
                    <HorizontalLayout spacing="10" height="30">
                        <Text id="unitDetails_honoursHeader" width="70%" color="#BBBBBB">Battle Honours (0 / 3)</Text>
                        <Button id="unitDetails_addHonour"
                                width="30%"
                                colors="#8B6914|#D4A843|#6B5010|#44340A"
                                textColor="#FFFFFF"
                                onClick="onUIButtonClick">
                            Add
                        </Button>
                    </HorizontalLayout>
                    <Panel id="unitDetails_honoursList" width="100%" height="40">
                        <Text fontSize="10" color="#666666">No honours yet</Text>
                    </Panel>
                </VerticalLayout>
            </Panel>

            <!-- Save/Cancel Buttons -->
            <HorizontalLayout spacing="10" height="40">
                <Button id="unitDetails_cancel"
                        width="50%"
                        colors="#3A2222|#553333|#2A1515|#221111"
                        textColor="#CC8888"
                        onClick="onUIButtonClick">
                    Cancel
                </Button>
                <Button id="unitDetails_save"
                        width="50%"
                        fontStyle="Bold"
                        onClick="onUIButtonClick"
                        colors="#2E6B3A|#3D8B4D|#1E4B2A|#152E1A"
                        textColor="#FFFFFF">
                    Save Unit
                </Button>
            </HorizontalLayout>
        </VerticalLayout>
    </Panel>

    <!-- New Recruit Import Panel (Phase 3) -->
    <Panel id="newRecruitImportPanel"
           width="100%"
           height="100%"
           active="false">

        <VerticalLayout spacing="10" padding="15">
            <Text fontSize="20" fontStyle="Bold" color="#D4A843">Import from New Recruit</Text>

            <Text fontSize="12" color="#BBBBBB">
                Paste the JSON export from newrecruit.eu below:
            </Text>

            <!-- JSON Input Area -->
            <InputField id="newRecruit_jsonInput"
                       width="100%"
                       height="400"
                       characterLimit="10000"
                       lineType="MultiLine"
                       placeholder="Paste New Recruit JSON here..."
                       onValueChanged="onUIButtonClick" />

            <!-- Import Status -->
            <Text id="newRecruit_status" fontSize="12" color="#D4A843">
                Ready to import
            </Text>

            <!-- Action Buttons -->
            <HorizontalLayout spacing="10" height="40">
                <Button id="newRecruit_cancel"
                        width="50%"
                        colors="#3A2222|#553333|#2A1515|#221111"
                        textColor="#CC8888"
                        onClick="onUIButtonClick">
                    Cancel
                </Button>
                <Button id="newRecruit_import"
                        width="50%"
                        fontStyle="Bold"
                        onClick="onUIButtonClick"
                        colors="#8B6914|#D4A843|#6B5010|#44340A"
                        textColor="#FFFFFF">
                    Import Units
                </Button>
            </HorizontalLayout>
        </VerticalLayout>
    </Panel>

    <!-- Record Battle Panel (3-Step Workflow) -->
    <Panel id="recordBattlePanel"
           width="100%"
           height="100%"
           active="false">

        <VerticalLayout spacing="8" padding="12 15 12 15">
            <Text fontSize="22" alignment="MiddleCenter" fontStyle="Bold" color="#D4A843">
                RECORD BATTLE
            </Text>

            <!-- Step Indicator with Labels -->
            <HorizontalLayout spacing="3" height="36">
                <Panel id="recordBattleStep1Indicator" width="33%" height="100%" color="#D4A843">
                    <Text id="recordBattleStep1Label" text="1 Setup" fontSize="10" color="#000000" alignment="MiddleCenter" fontStyle="Bold" />
                </Panel>
                <Panel id="recordBattleStep2Indicator" width="33%" height="100%" color="#333333">
                    <Text id="recordBattleStep2Label" text="2 Results" fontSize="10" color="#666666" alignment="MiddleCenter" />
                </Panel>
                <Panel id="recordBattleStep3Indicator" width="33%" height="100%" color="#333333">
                    <Text id="recordBattleStep3Label" text="3 Post-Battle" fontSize="10" color="#666666" alignment="MiddleCenter" />
                </Panel>
            </HorizontalLayout>

            <!-- Step 1: Battle Setup -->
            <Panel id="recordBattleStep1Panel"
                   width="100%"
                   height="400"
                   active="true">

                <VerticalLayout spacing="10">
                    <Text fontSize="13" color="#D4A843" fontStyle="Bold">BATTLE SETUP</Text>

                    <!-- Battle Size -->
                    <HorizontalLayout spacing="10" height="30">
                        <Text width="30%" color="#BBBBBB">Battle Size:</Text>
                        <Dropdown id="recordBattle_battleSize"
                                  width="70%"
                                  onValueChanged="onRecordBattleDropdownChange">
                            <Option>Incursion</Option>
                            <Option selected="true">Strike Force</Option>
                            <Option>Onslaught</Option>
                        </Dropdown>
                    </HorizontalLayout>

                    <!-- Mission Type -->
                    <HorizontalLayout spacing="10" height="30">
                        <Text width="30%" color="#BBBBBB">Mission:</Text>
                        <InputField id="recordBattle_missionType"
                                    width="70%"
                                    placeholder="Mission name"
                                    onValueChanged="onRecordBattleInputChange" />
                    </HorizontalLayout>

                    <!-- Mission Pack -->
                    <HorizontalLayout spacing="10" height="30">
                        <Text width="30%" color="#888888">Mission Pack:</Text>
                        <InputField id="recordBattle_missionPack"
                                    width="70%"
                                    placeholder="Optional"
                                    onValueChanged="onRecordBattleInputChange" />
                    </HorizontalLayout>

                    <!-- Hex Location -->
                    <HorizontalLayout spacing="10" height="30">
                        <Text width="30%" color="#888888">Hex Location:</Text>
                        <InputField id="recordBattle_hexLocation"
                                    width="70%"
                                    placeholder="e.g., 0,0"
                                    onValueChanged="onRecordBattleInputChange" />
                    </HorizontalLayout>

                    <Panel height="10" />
                    <Text fontSize="13" color="#D4A843">PARTICIPANTS</Text>
                    <Panel id="recordBattle_participantsContainer" height="150" />
                </VerticalLayout>
            </Panel>

            <!-- Step 2: Battle Results -->
            <Panel id="recordBattleStep2Panel"
                   width="100%"
                   height="400"
                   active="false">

                <VerticalLayout spacing="10">
                    <Text fontSize="13" color="#D4A843" fontStyle="Bold">BATTLE RESULTS</Text>

                    <Text fontSize="11" color="#888888">
                        Enter battle outcome, victory points, and casualties
                    </Text>

                    <Panel height="10" />
                    <Text fontSize="13" color="#BBBBBB">Winner Selection</Text>
                    <Panel id="recordBattle_winnerContainer" height="80" />

                    <Panel height="10" />
                    <Text fontSize="13" color="#BBBBBB">Destroyed Units</Text>
                    <Panel id="recordBattle_destroyedContainer" height="150" />

                    <Panel height="10" />
                    <Text fontSize="13" color="#BBBBBB">Combat Tallies</Text>
                    <Panel id="recordBattle_talliesContainer" height="100" />
                </VerticalLayout>
            </Panel>

            <!-- Step 3: Post-Battle -->
            <Panel id="recordBattleStep3Panel"
                   width="100%"
                   height="400"
                   active="false">

                <VerticalLayout spacing="10">
                    <Text fontSize="13" color="#D4A843" fontStyle="Bold">POST-BATTLE</Text>

                    <Text fontSize="11" color="#888888">
                        XP awards, Out of Action tests, and agendas
                    </Text>

                    <Panel height="10" />
                    <Text fontSize="13" color="#BBBBBB">Marked for Greatness</Text>
                    <Panel id="recordBattle_markedContainer" height="100" />

                    <Panel height="10" />
                    <Text fontSize="13" color="#BBBBBB">Out of Action Tests</Text>
                    <Panel id="recordBattle_outOfActionContainer" height="150" />

                    <Panel height="10" />
                    <Text fontSize="13" color="#D4A843">BATTLE SUMMARY</Text>
                    <Text id="recordBattle_summary" fontSize="12" color="#4CAF50">
                        XP and Out of Action results will appear here
                    </Text>
                </VerticalLayout>
            </Panel>

            <!-- Navigation Buttons -->
            <HorizontalLayout spacing="8" height="42">
                <Button id="recordBattle_cancel"
                        width="25%"
                        fontSize="13"
                        colors="#3A2222|#553333|#2A1515|#221111"
                        textColor="#CC8888"
                        onClick="onRecordBattleButtonClick">
                    Cancel
                </Button>

                <Button id="recordBattle_previous"
                        width="30%"
                        fontSize="13"
                        colors="#444444|#666666|#333333|#222222"
                        textColor="#AAAAAA"
                        onClick="onRecordBattleButtonClick">
                    Previous
                </Button>

                <Button id="recordBattle_next"
                        width="45%"
                        fontSize="15"
                        fontStyle="Bold"
                        colors="#8B6914|#D4A843|#6B5010|#44340A"
                        textColor="#FFFFFF"
                        onClick="onRecordBattleButtonClick">
                    Next
                </Button>
            </HorizontalLayout>
        </VerticalLayout>
    </Panel>

    <!-- Map View Panel -->
    <Panel id="mapViewPanel"
           width="100%"
           height="100%"
           active="false">

        <VerticalLayout spacing="10" padding="15">
            <Text fontSize="20" fontStyle="Bold" color="#D4A843" alignment="MiddleCenter">
                Campaign Map
            </Text>

            <!-- Hex Info Display -->
            <Panel width="100%" height="120" color="rgba(20,20,30,0.9)" padding="10">
                <VerticalLayout spacing="5">
                    <Text fontSize="13" color="#D4A843" fontStyle="Bold">SELECTED HEX</Text>
                    <Text id="mapHexInfo" fontSize="12" color="#BBBBBB">
                        Click a hex on the map to view details.
                    </Text>
                    <Text id="mapHexBonuses" fontSize="11" color="#888888">
                    </Text>
                </VerticalLayout>
            </Panel>

            <!-- Map Display Options -->
            <Panel width="100%" height="80" color="rgba(20,20,30,0.9)" padding="10">
                <VerticalLayout spacing="5">
                    <Text fontSize="13" color="#D4A843" fontStyle="Bold">DISPLAY OPTIONS</Text>
                    <HorizontalLayout spacing="10" height="25">
                        <Toggle id="mapView_toggleHexGuides"
                                onValueChanged="onUIButtonClick">
                            Hex Guides
                        </Toggle>
                        <Toggle id="mapView_toggleDormant"
                                onValueChanged="onUIButtonClick">
                            Dormant Hexes
                        </Toggle>
                        <Toggle id="mapView_toggleNeutral"
                                onValueChanged="onUIButtonClick">
                            Neutral Hexes
                        </Toggle>
                    </HorizontalLayout>
                </VerticalLayout>
            </Panel>

            <!-- Map Actions -->
            <HorizontalLayout spacing="10" height="40">
                <Button id="mapView_openControls"
                        width="50%"
                        colors="#8B6914|#D4A843|#6B5010|#44340A"
                        textColor="#FFFFFF"
                        onClick="onUIButtonClick">
                    Territory Controls
                </Button>
                <Button id="mapView_changeSkin"
                        width="50%"
                        colors="#444444|#666666|#333333|#222222"
                        textColor="#CCCCCC"
                        onClick="onUIButtonClick">
                    Change Map Skin
                </Button>
            </HorizontalLayout>

            <Button id="mapView_close"
                    height="40"
                    colors="#444444|#666666|#333333|#222222"
                    textColor="#CCCCCC"
                    onClick="onUIButtonClick">
                Close
            </Button>
        </VerticalLayout>
    </Panel>

    <!-- Map Controls Panel -->
    <Panel id="mapControlsPanel"
           width="100%"
           height="100%"
           active="false">

        <VerticalLayout spacing="10" padding="15">
            <Text fontSize="20" fontStyle="Bold" color="#D4A843" alignment="MiddleCenter">
                Territory Controls
            </Text>

            <!-- Selected Hex Info -->
            <Panel width="100%" height="80" color="rgba(20,20,30,0.9)" padding="10">
                <VerticalLayout spacing="5">
                    <Text fontSize="13" color="#D4A843" fontStyle="Bold">SELECTED TERRITORY</Text>
                    <Text id="mapControls_hexInfo" fontSize="12" color="#BBBBBB">
                        No hex selected. Click a hex on the map.
                    </Text>
                </VerticalLayout>
            </Panel>

            <!-- Player Selection -->
            <HorizontalLayout spacing="10" height="35">
                <Text width="25%" color="#BBBBBB">Player:</Text>
                <Dropdown id="mapControls_playerSelect"
                         width="75%"
                         onValueChanged="onUIButtonClick">
                </Dropdown>
            </HorizontalLayout>

            <!-- Territory Actions -->
            <VerticalLayout spacing="8">
                <Button id="mapControlsClaim"
                        height="40"
                        fontStyle="Bold"
                        colors="#8B6914|#D4A843|#6B5010|#44340A"
                        textColor="#FFFFFF"
                        onClick="onUIButtonClick">
                    Claim Territory
                </Button>

                <Button id="mapControls_toggleActive"
                        height="35"
                        colors="#444444|#666666|#333333|#222222"
                        textColor="#CCCCCC"
                        onClick="onUIButtonClick">
                    Toggle Hex Active/Dormant
                </Button>
            </VerticalLayout>

            <!-- Territory Bonuses -->
            <Panel width="100%" height="100" color="rgba(20,20,30,0.9)" padding="10">
                <VerticalLayout spacing="5">
                    <Text fontSize="13" color="#D4A843" fontStyle="Bold">TERRITORY BONUSES</Text>
                    <HorizontalLayout spacing="5" height="30">
                        <Dropdown id="mapBonusType"
                                  width="40%"
                                  onValueChanged="onUIButtonClick">
                            <Option>RP</Option>
                            <Option>Resource</Option>
                            <Option>BattleHonour</Option>
                            <Option>Custom</Option>
                        </Dropdown>
                        <InputField id="mapBonusAmount"
                                    width="20%"
                                    characterLimit="5"
                                    placeholder="Amt"
                                    onValueChanged="onUIButtonClick" />
                        <InputField id="mapBonusDesc"
                                    width="40%"
                                    placeholder="Description"
                                    onValueChanged="onUIButtonClick" />
                    </HorizontalLayout>
                    <Button id="mapAddBonus"
                            height="30"
                            colors="#2E6B3A|#3D8B4D|#1E4B2A|#152E1A"
                            textColor="#FFFFFF"
                            onClick="onUIButtonClick">
                        Add Bonus
                    </Button>
                </VerticalLayout>
            </Panel>

            <Button id="mapControlsClose"
                    height="40"
                    colors="#444444|#666666|#333333|#222222"
                    textColor="#CCCCCC"
                    onClick="onUIButtonClick">
                Close
            </Button>
        </VerticalLayout>
    </Panel>

    <!-- Supplement Panel -->
    <Panel id="supplementPanel"
           width="100%"
           height="100%"
           active="false">

        <VerticalLayout spacing="6" padding="12 15 12 15">
            <!-- Header with Back Button -->
            <HorizontalLayout spacing="10" height="35">
                <Button id="supplement_close"
                        width="20%"
                        fontSize="12"
                        colors="#444444|#666666|#333333|#222222"
                        textColor="#CCCCCC"
                        onClick="onUIButtonClick">
                    Back
                </Button>
                <Text fontSize="20"
                      fontStyle="Bold"
                      color="#D4A843"
                      alignment="MiddleCenter"
                      width="80%">
                    Crusade Supplement
                </Text>
            </HorizontalLayout>

            <Panel height="2" />

            <!-- Dynamic Content Area (populated by SupplementPanel.refresh) -->
            <Panel id="supplementContentArea"
                   width="100%"
                   height="520">
                <Text fontSize="12" color="#888888" alignment="MiddleCenter">
                    Loading supplement data...
                </Text>
            </Panel>
        </VerticalLayout>
    </Panel>

    <!-- Battle Log Panel -->
    <Panel id="battleLogPanel"
           width="100%"
           height="100%"
           active="false">

        <VerticalLayout spacing="10" padding="15">
            <Text fontSize="20" fontStyle="Bold" color="#D4A843" alignment="MiddleCenter">
                Battle History
            </Text>

            <!-- Filters -->
            <HorizontalLayout spacing="10" height="30">
                <Text width="20%" color="#BBBBBB">Filter:</Text>
                <Dropdown id="battleLog_filterPlayer"
                          width="40%"
                          onValueChanged="onBattleLogDropdownChange">
                    <Option selected="true">All Players</Option>
                </Dropdown>

                <Dropdown id="battleLog_filterBattleSize"
                          width="40%"
                          onValueChanged="onBattleLogDropdownChange">
                    <Option selected="true">All Sizes</Option>
                    <Option>Incursion</Option>
                    <Option>Strike Force</Option>
                    <Option>Onslaught</Option>
                </Dropdown>
            </HorizontalLayout>

            <!-- Sort -->
            <HorizontalLayout spacing="10" height="30">
                <Text width="20%" color="#BBBBBB">Sort by:</Text>
                <Dropdown id="battleLog_sortBy"
                          width="50%"
                          onValueChanged="onBattleLogDropdownChange">
                    <Option selected="true">Newest First</Option>
                    <Option>Oldest First</Option>
                    <Option>Most Participants</Option>
                    <Option>Battle Size</Option>
                </Dropdown>

                <Button id="battleLog_clearFilters"
                        width="30%"
                        colors="#444444|#666666|#333333|#222222"
                        textColor="#CCCCCC"
                        onClick="onBattleLogButtonClick">
                    Clear Filters
                </Button>
            </HorizontalLayout>

            <!-- Stats -->
            <HorizontalLayout spacing="5" height="40">
                <Text id="battleLog_battleCount" width="50%" fontSize="12" color="#BBBBBB">
                    Total Battles: 0
                </Text>
                <Text id="battleLog_filterIndicator" width="50%" fontSize="12" color="#888888">
                    Filters: None
                </Text>
            </HorizontalLayout>

            <Panel height="5" />

            <!-- Battle List Panel -->
            <Panel id="battleListPanel"
                   width="100%"
                   height="350"
                   active="true">

                <VerticalLayout spacing="5">
                    <Text fontSize="13" color="#BBBBBB">Battle List</Text>
                    <Panel id="battleLog_battleListContainer" height="300" />
                </VerticalLayout>
            </Panel>

            <!-- Battle Details Panel -->
            <Panel id="battleDetailsPanel"
                   width="100%"
                   height="350"
                   active="false">

                <VerticalLayout spacing="10">
                    <HorizontalLayout spacing="10" height="30">
                        <Text id="battleDetails_missionType" width="70%" fontSize="16" color="#D4A843">
                            Mission Name
                        </Text>
                        <Button id="battleLog_closeBattleDetails"
                                width="30%"
                                colors="#444444|#666666|#333333|#222222"
                                textColor="#CCCCCC"
                                onClick="onBattleLogButtonClick">
                            Back to List
                        </Button>
                    </HorizontalLayout>

                    <Text id="battleDetails_battleSize" fontSize="12" color="#BBBBBB">Battle Size</Text>
                    <Text id="battleDetails_timestamp" fontSize="12" color="#888888">Timestamp</Text>
                    <Text id="battleDetails_winner" fontSize="14" color="#4CAF50">Winner</Text>
                    <Text id="battleDetails_participants" fontSize="12" color="#BBBBBB">Participants</Text>

                    <Panel height="10" />
                    <Text fontSize="13" color="#D4A843" fontStyle="Bold">DETAILED INFORMATION</Text>
                    <Panel id="battleDetails_detailsContainer" height="150" />
                </VerticalLayout>
            </Panel>

            <!-- Pagination -->
            <HorizontalLayout spacing="10" height="35">
                <Button id="battleLog_previousPage"
                        width="25%"
                        colors="#444444|#666666|#333333|#222222"
                        textColor="#CCCCCC"
                        onClick="onBattleLogButtonClick">
                    &lt; Prev
                </Button>

                <Text id="battleLog_pageIndicator"
                      width="50%"
                      alignment="MiddleCenter"
                      color="#888888"
                      fontSize="12">
                    Page 1 of 1
                </Text>

                <Button id="battleLog_nextPage"
                        width="25%"
                        colors="#444444|#666666|#333333|#222222"
                        textColor="#CCCCCC"
                        onClick="onBattleLogButtonClick">
                    Next &gt;
                </Button>
            </HorizontalLayout>

            <!-- Close Button -->
            <Button id="battleLog_close"
                    height="40"
                    colors="#444444|#666666|#333333|#222222"
                    textColor="#CCCCCC"
                    onClick="onUIButtonClick">
                Close
            </Button>
        </VerticalLayout>
    </Panel>

</Panel>
